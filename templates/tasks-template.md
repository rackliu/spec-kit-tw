---
description: "功能實現任務列表模板"
---

# 任務: [FEATURE NAME]

**輸入**: 來自 `/specs/[###-feature-name]/` 的設計文件
**前置條件**: plan.md(必需)、spec.md(使用者故事必需)、research.md、data-model.md、contracts/

**測試**: 以下範例包含測試任務. 測試是可選的 - 僅在功能規格中明確要求時才包含.

**組織結構**: 任務按使用者故事分組, 以便每個故事能夠獨立實施和測試.

## 格式: `[ID] [P?] [Story] 描述`
- **[P]**: 可以並行執行(不同檔案, 無依賴關係)
- **[Story]**: 此任務屬於哪個使用者故事(例如: US1、US2、US3)
- 在描述中包含確切的檔案路徑

## 路徑約定
- **單一專案**: 倉庫根目錄下的 `src/`、`tests/`
- **Web 應用**: `backend/src/`、`frontend/src/`
- **移動應用**: `api/src/`、`ios/src/` 或 `android/src/`
- 以下顯示的路徑假設為單一專案 - 根據 plan.md 結構進行調整

<!--
  ============================================================================
  重要說明: 以下任務僅為說明目的的範例任務.

  /speckit.tasks 命令必須根據以下內容替換為實際任務: 
  - 來自 spec.md 的使用者故事(及其優先順序 P1、P2、P3...)
  - 來自 plan.md 的功能需求
  - 來自 data-model.md 的實體
  - 來自 contracts/ 的端點

  任務必須按使用者故事組織, 以便每個故事能夠: 
  - 獨立實施
  - 獨立測試
  - 作為 MVP 增量交付

  不要在生成的 tasks.md 檔案中保留這些範例任務.
  ============================================================================
-->

## 階段 1: 設定(共享基礎設施)

**目的**: 專案初始化和基本結構

- [ ] T001 根據實施計劃建立專案結構
- [ ] T002 使用 [framework] 依賴項初始化 [language] 專案
- [ ] T003 [P] 配置程式碼檢查和格式化工具

---

## 階段 2: 基礎(阻塞前置條件)

**目的**: 在任何使用者故事可以實施之前必須完成的核心基礎設施

**⚠️ 關鍵**: 在此階段完成之前, 無法開始任何使用者故事工作

基礎任務範例(根據你的專案調整): 

- [ ] T004 設定資料庫架構和遷移框架
- [ ] T005 [P] 實施身份驗證/授權框架
- [ ] T006 [P] 設定 API 路由和中介軟體結構
- [ ] T007 建立所有故事依賴的基礎模型/實體
- [ ] T008 配置錯誤處理和日誌記錄基礎設施
- [ ] T009 設定環境配置管理

**檢查點**: 基礎就緒 - 現在可以開始並行實施使用者故事

---

## 階段 3: 使用者故事 1 - [Title](優先順序: P1)🎯 MVP

**目標**: [此故事交付內容的簡要描述]

**獨立測試**: [如何驗證此故事獨立執行]

### 使用者故事 1 的測試(可選 - 僅在要求測試時)⚠️

**注意: 先編寫這些測試, 確保在實施前它們失敗**

- [ ] T010 [P] [US1] 在 tests/contract/test_[name].py 中為 [endpoint] 編寫合約測試
- [ ] T011 [P] [US1] 在 tests/integration/test_[name].py 中為 [user journey] 編寫整合測試

### 使用者故事 1 的實施

- [ ] T012 [P] [US1] 在 src/models/[entity1].py 中建立 [Entity1] 模型
- [ ] T013 [P] [US1] 在 src/models/[entity2].py 中建立 [Entity2] 模型
- [ ] T014 [US1] 在 src/services/[service].py 中實施 [Service](依賴於 T012、T013)
- [ ] T015 [US1] 在 src/[location]/[file].py 中實施 [endpoint/feature]
- [ ] T016 [US1] 新增驗證和錯誤處理
- [ ] T017 [US1] 為使用者故事 1 操作新增日誌記錄

**檢查點**: 此時, 使用者故事 1 應該完全功能化且可獨立測試

---

## 階段 4: 使用者故事 2 - [Title](優先順序: P2)

**目標**: [此故事交付內容的簡要描述]

**獨立測試**: [如何驗證此故事獨立執行]

### 使用者故事 2 的測試(可選 - 僅在要求測試時)⚠️

- [ ] T018 [P] [US2] 在 tests/contract/test_[name].py 中為 [endpoint] 編寫合約測試
- [ ] T019 [P] [US2] 在 tests/integration/test_[name].py 中為 [user journey] 編寫整合測試

### 使用者故事 2 的實施

- [ ] T020 [P] [US2] 在 src/models/[entity].py 中建立 [Entity] 模型
- [ ] T021 [US2] 在 src/services/[service].py 中實施 [Service]
- [ ] T022 [US2] 在 src/[location]/[file].py 中實施 [endpoint/feature]
- [ ] T023 [US2] 與使用者故事 1 元件整合(如需要)

**檢查點**: 此時, 使用者故事 1 和 2 都應該獨立執行

---

## 階段 5: 使用者故事 3 - [Title](優先順序: P3)

**目標**: [此故事交付內容的簡要描述]

**獨立測試**: [如何驗證此故事獨立執行]

### 使用者故事 3 的測試(可選 - 僅在要求測試時)⚠️

- [ ] T024 [P] [US3] 在 tests/contract/test_[name].py 中為 [endpoint] 編寫合約測試
- [ ] T025 [P] [US3] 在 tests/integration/test_[name].py 中為 [user journey] 編寫整合測試

### 使用者故事 3 的實施

- [ ] T026 [P] [US3] 在 src/models/[entity].py 中建立 [Entity] 模型
- [ ] T027 [US3] 在 src/services/[service].py 中實施 [Service]
- [ ] T028 [US3] 在 src/[location]/[file].py 中實施 [endpoint/feature]

**檢查點**: 所有使用者故事現在應該獨立功能化

---

[根據需要新增更多使用者故事階段, 遵循相同模式]

---

## 階段 N: 完善與橫切關注點

**目的**: 影響多個使用者故事的改進

- [ ] TXXX [P] 在 docs/ 中更新文件
- [ ] TXXX 程式碼清理和重構
- [ ] TXXX 跨所有故事的效能最佳化
- [ ] TXXX [P] 在 tests/unit/ 中新增額外的單元測試(如要求)
- [ ] TXXX 安全加固
- [ ] TXXX 執行 quickstart.md 驗證

---

## 依賴關係與執行順序

### 階段依賴關係

- **設定(階段 1)**: 無依賴關係 - 可立即開始
- **基礎(階段 2)**: 依賴於設定完成 - 阻塞所有使用者故事
- **使用者故事(階段 3+)**: 都依賴於基礎階段完成
  - 然後使用者故事可以並行進行(如果有人員)
  - 或按優先順序順序進行(P1 → P2 → P3)
- **完善(最終階段)**: 依賴於所有期望的使用者故事完成

### 使用者故事依賴關係

- **使用者故事 1(P1)**: 可在基礎(階段 2)後開始 - 無其他故事依賴
- **使用者故事 2(P2)**: 可在基礎(階段 2)後開始 - 可與 US1 整合但應獨立可測試
- **使用者故事 3(P3)**: 可在基礎(階段 2)後開始 - 可與 US1/US2 整合但應獨立可測試

### 每個使用者故事內部

- 測試(如包含)必須在實施前編寫並失敗
- 模型在服務之前
- 服務在端點之前
- 核心實施在整合之前
- 故事完成後才移至下一個優先順序

### 並行機會

- 所有標記為 [P] 的設定任務可以並行執行
- 所有標記為 [P] 的基礎任務可以並行執行(在階段 2 內)
- 基礎階段完成後, 所有使用者故事可以並行開始(如果團隊容量允許)
- 使用者故事中所有標記為 [P] 的測試可以並行執行
- 故事中標記為 [P] 的模型可以並行執行
- 不同使用者故事可以由不同團隊成員並行處理

---

## 並行範例: 使用者故事 1

```bash
# 一起啟動使用者故事 1 的所有測試(如要求測試): 
任務: "在 tests/contract/test_[name].py 中為 [endpoint] 編寫合約測試"
任務: "在 tests/integration/test_[name].py 中為 [user journey] 編寫整合測試"

# 一起啟動使用者故事 1 的所有模型: 
任務: "在 src/models/[entity1].py 中建立 [Entity1] 模型"
任務: "在 src/models/[entity2].py 中建立 [Entity2] 模型"
```

---

## 實施策略

### 僅 MVP(僅使用者故事 1)

1. 完成階段 1: 設定
2. 完成階段 2: 基礎(關鍵 - 阻塞所有故事)
3. 完成階段 3: 使用者故事 1
4. **停止並驗證**: 獨立測試使用者故事 1
5. 如準備好則部署/演示

### 增量交付

1. 完成設定 + 基礎 → 基礎就緒
2. 新增使用者故事 1 → 獨立測試 → 部署/演示(MVP! )
3. 新增使用者故事 2 → 獨立測試 → 部署/演示
4. 新增使用者故事 3 → 獨立測試 → 部署/演示
5. 每個故事在不破壞先前故事的情況下增加價值

### 並行團隊策略

有多個開發人員時: 

1. 團隊一起完成設定 + 基礎
2. 基礎完成後: 
   - 開發人員 A: 使用者故事 1
   - 開發人員 B: 使用者故事 2
   - 開發人員 C: 使用者故事 3
3. 故事獨立完成和整合

---

## 注意事項

- [P] 任務 = 不同檔案, 無依賴關係
- [Story] 標籤將任務對映到特定使用者故事以實現可追溯性
- 每個使用者故事應該獨立可完成和可測試
- 在實施前驗證測試失敗
- 在每個任務或邏輯組後提交
- 在任何檢查點停止以獨立驗證故事
- 避免: 模糊任務、相同檔案衝突、破壞獨立性的跨故事依賴

